# ============================================================
# RegIntel v2 — Production Environment Variables
# ============================================================
# Copy this file to .env on your server and fill in real values.
# NEVER commit a .env file with real secrets to git.
# ============================================================

# ── Node Environment ─────────────────────────────────────────
NODE_ENV=production

# ── Web App ──────────────────────────────────────────────────
# Leave NEXT_PUBLIC_API_BASE_URL unset — the Next.js proxy handles routing.
# Only set this if your API runs on a different domain/server.
# NEXT_PUBLIC_API_BASE_URL=https://api.regintelia.co.uk

# ── Clerk Authentication ──────────────────────────────────────
# Get these from: https://dashboard.clerk.com
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_live_xxx
CLERK_SECRET_KEY=sk_live_xxx
CLERK_WEBHOOK_SECRET=whsec_xxx   # From Clerk dashboard → Webhooks

# ── CORS (API server) ─────────────────────────────────────────
# Comma-separated list of allowed origins (no trailing slash)
ALLOWED_ORIGINS=https://regintelia.co.uk,https://www.regintelia.co.uk

# ── Database (PostgreSQL) ─────────────────────────────────────
# Required for persistent data storage
DATABASE_URL=postgresql://USER:PASSWORD@HOST:5432/regintel_prod?schema=public

# Use Prisma store (PostgreSQL) — must be true in production
USE_DB_STORE=true

# ── Redis (Background Jobs) ───────────────────────────────────
# Required for CQC report scraping, malware scanning, AI insights
REDIS_URL=redis://localhost:6379

# ── CQC API ───────────────────────────────────────────────────
# Required for CQC location lookups during facility onboarding
CQC_API_KEY=your-cqc-api-key-here

# ── Evidence Blob Storage ─────────────────────────────────────
# Must be a persistent path (NOT /tmp — wiped on restart)
BLOB_STORAGE_PATH=/var/regintel/evidence-blobs

# ── AI (Gemini) ───────────────────────────────────────────────
GEMINI_API_KEY=your-gemini-api-key
GEMINI_MODEL_ID=gemini-2.0-flash
AI_CONFIDENCE_THRESHOLD=0.7
ENABLE_AI_INSIGHTS=true

# ── API Server ────────────────────────────────────────────────
PORT=3001

# ── Rate Limiting ─────────────────────────────────────────────
# Leave unset or false in production (rate limiting enabled by default)
# DISABLE_RATE_LIMIT=false

# ── E2E / Test Mode ───────────────────────────────────────────
# MUST be false (or unset) in production — true bypasses all authentication
E2E_TEST_MODE=false
NEXT_PUBLIC_E2E_TEST_MODE=false

# ── DO NOT SET THESE IN PRODUCTION ───────────────────────────
# These are dev/test-only values — remove entirely from production .env
# CLERK_TEST_TOKEN=
# CLERK_TEST_TENANT_ID=
# CLERK_TEST_USER_ID=
# CLERK_TEST_ROLE=
