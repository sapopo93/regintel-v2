(()=>{var e={};e.id=855,e.ids=[855],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2690:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c}),a(8795),a(7565),a(8844),a(2154);var r=a(7080),t=a(9920),i=a(1559),o=a.n(i),n=a(9210),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(s,l);let c=["",{children:["(app)",{children:["exports",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8795)),"/Users/user/regintel-v2/apps/web/src/app/(app)/exports/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,7565)),"/Users/user/regintel-v2/apps/web/src/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,8844,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2154)),"/Users/user/regintel-v2/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,8844,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/user/regintel-v2/apps/web/src/app/(app)/exports/page.tsx"],p="/(app)/exports/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(app)/exports/page",pathname:"/exports",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3394:(e,s,a)=>{Promise.resolve().then(a.bind(a,4151))},4151:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var r=a(3716),t=a(2899),i=a(2367),o=a(4130),n=a(9814),l=a(3962),c=a(6428),d=a(6173),p=a(9580),u=a(7950);a(20);var m=a(3166),x=a.n(m);function h(){let e=(0,i.useSearchParams)(),s=e.get("provider"),a=e.get("facility"),[m,h]=(0,t.useState)(null),[_,g]=(0,t.useState)(null),[v,j]=(0,t.useState)("BLUE_OCEAN_BOARD"),[b,N]=(0,t.useState)(!0),[y,f]=(0,t.useState)(!1),[C,E]=(0,t.useState)(null),[P,S]=(0,t.useState)(null),[w,D]=(0,t.useState)(null),k=(0,u.sW)(),A="true"===e.get("enableAuditExport"),L="FOUNDER"===k||A&&!1,T=e=>"BLUE_OCEAN_BOARD"===e||"BLUE_OCEAN"===e?"Blue Ocean Report (Board Pack)":"BLUE_OCEAN_AUDIT"===e?"Blue Ocean Report (Audit Pack — Internal)":"CSV"===e?"CSV (Spreadsheet)":"PDF"===e?"PDF (Document)":e,B=_?_.availableFormats.filter(e=>"BLUE_OCEAN_AUDIT"!==e||L):[],V=async()=>{if(!s||!a){S("No provider or facility selected");return}f(!0),S(null),D(null);try{let e=await p.x1.generateExport(s,{facilityId:a,format:v,includeWatermark:b}),r=(0,u.bW)();r?D(`${e.downloadUrl}?token=${encodeURIComponent(r)}`):D(e.downloadUrl)}catch(e){S(e.message)}finally{f(!1)}};return s&&a?C?r.jsx("div",{className:x().layout,children:(0,r.jsxs)("div",{className:x().error,children:["Error: ",C]})}):m&&_?r.jsx(d.q,{reportingDomain:_.reportingDomain,children:(0,r.jsxs)("div",{className:x().layout,children:[r.jsx(o.Y,{providerName:m.provider.providerName,snapshotDate:m.provider.asOf,status:m.provider.prsState,topicCatalogVersion:_.topicCatalogVersion,prsLogicVersion:_.prsLogicVersion,topicsCompleted:m.topicsCompleted,totalTopics:m.totalTopics}),(0,r.jsxs)("main",{className:x().main,children:[r.jsx(n.m,{title:"Export Readiness Report",subtitle:m.facility?`${m.provider.providerName} - ${m.facility.facilityName} | Generate export`:`${m.provider.providerName} | Generate export`,topicCatalogVersion:_.topicCatalogVersion,topicCatalogHash:_.topicCatalogHash,prsLogicVersion:_.prsLogicVersion,prsLogicHash:_.prsLogicHash,snapshotTimestamp:_.snapshotTimestamp,domain:_.domain,reportingDomain:_.reportingDomain}),r.jsx(l.V,{summary:(0,r.jsxs)("div",{className:x().section,children:[r.jsx("h2",{className:x().sectionTitle,children:"Export Configuration"}),(0,r.jsxs)("div",{className:x().formGroup,children:[r.jsx("label",{className:x().label,children:"Format"}),r.jsx("div",{className:x().radioGroup,children:B.map(e=>(0,r.jsxs)("label",{className:x().radio,children:[r.jsx("input",{type:"radio",value:e,checked:v===e,onChange:e=>j(e.target.value)}),r.jsx("span",{children:T(e)})]},e))})]}),r.jsx("div",{className:x().formGroup,children:(0,r.jsxs)("label",{className:x().checkbox,children:[r.jsx("input",{type:"checkbox",checked:b,onChange:e=>N(e.target.checked)}),(0,r.jsxs)("span",{children:["Include watermark: ",_.watermark]})]})}),r.jsx("button",{className:x().exportButton,onClick:V,disabled:y,"data-testid":"primary-generate-export",children:y?"Generating...":`Generate ${T(v)}`}),P&&(0,r.jsxs)("div",{className:x().errorMessage,children:[P,(P.includes("No completed session")||P.includes("Conflict"))&&r.jsx("div",{style:{marginTop:"8px",fontSize:"0.9em"},children:'\uD83D\uDCA1 Tip: Complete a mock inspection session first. Navigate to "Mock Session" from the sidebar.'})]}),w&&(0,r.jsxs)("div",{className:x().section,children:[r.jsx("h2",{className:x().sectionTitle,children:"Export Ready"}),r.jsx("p",{className:x().successMessage,children:"Your export has been generated."}),(0,r.jsxs)("a",{href:w,download:!0,className:x().downloadButton,children:["Download ",T(v)]})]})]}),evidence:(0,r.jsxs)("div",{className:x().section,children:[r.jsx("h2",{className:x().sectionTitle,children:"Export Contents"}),(0,r.jsxs)("ul",{className:x().contentList,children:[r.jsx("li",{children:"Session metadata (ID, provider, versions, hashes)"}),r.jsx("li",{children:"Topic Catalog version and hash"}),r.jsx("li",{children:"PRS Logic Profile version and hash"}),r.jsx("li",{children:"All findings from mock sessions"}),r.jsx("li",{children:"Evidence coverage statistics"}),r.jsx("li",{children:"Watermark on every page/row (if enabled)"})]}),(0,r.jsxs)("div",{className:x().warning,children:[r.jsx("strong",{children:"Note:"})," Exports NEVER include regulatory history findings. All exported findings have origin=SYSTEM_MOCK."]}),_.latestExport&&(0,r.jsxs)("div",{className:x().latestExport,children:["Latest export: ",_.latestExport.exportId," (",_.latestExport.format,")"]})]}),trace:r.jsx(c.I,{topicCatalogVersion:_.topicCatalogVersion,topicCatalogHash:_.topicCatalogHash,prsLogicVersion:_.prsLogicVersion,prsLogicHash:_.prsLogicHash,snapshotTimestamp:_.snapshotTimestamp,domain:_.domain,reportingDomain:_.reportingDomain})})]})]})}):r.jsx("div",{className:x().layout,children:r.jsx("div",{className:x().loading,children:"Loading..."})}):r.jsx("div",{className:x().layout,children:r.jsx("div",{className:x().error,children:"No provider or facility selected"})})}},3962:(e,s,a)=>{"use strict";a.d(s,{V:()=>n});var r=a(3716),t=a(2899),i=a(8427),o=a.n(i);function n({summary:e,evidence:s,trace:a,labels:i,actions:n}){let[l,c]=(0,t.useState)("summary"),d=i?.summary??"Summary",p=i?.evidence??"Evidence",u=i?.trace??"Trace",m=n?.showEvidence??"Show Evidence →",x=n?.showTrace??"Show Trace →";return(0,r.jsxs)("div",{className:o().container,children:[(0,r.jsxs)("div",{className:o().tabs,children:[r.jsx("button",{className:"summary"===l?o().tabActive:o().tab,onClick:()=>c("summary"),children:d}),r.jsx("button",{className:"evidence"===l?o().tabActive:o().tab,onClick:()=>c("evidence"),disabled:"summary"===l,children:p}),r.jsx("button",{className:"trace"===l?o().tabActive:o().tab,onClick:()=>c("trace"),disabled:"trace"!==l,children:u})]}),(0,r.jsxs)("div",{className:o().content,children:["summary"===l&&(0,r.jsxs)("div",{className:o().layer,children:[e,r.jsx("button",{className:o().actionButton,onClick:()=>c("evidence"),children:m})]}),"evidence"===l&&(0,r.jsxs)("div",{className:o().layer,children:[s,r.jsx("button",{className:o().actionButton,onClick:()=>c("trace"),children:x})]}),"trace"===l&&r.jsx("div",{className:o().layer,children:a})]})]})}},6173:(e,s,a)=>{"use strict";a.d(s,{q:()=>p});var r=a(3716),t=a(20),i=a(2652),o=a(7811),n=a.n(o);function l(){return r.jsx("div",{className:n().watermark,"aria-hidden":"true",children:i.tx})}var c=a(4609),d=a.n(c);function p({origin:e,reportingDomain:s,children:a}){let i=(0,t.Eb)({origin:e,reportingDomain:s});return i?(0,r.jsxs)("div",{className:d().frame,style:{borderColor:i.borderColor,borderWidth:i.borderWidth},children:[r.jsx(l,{}),a]}):r.jsx(r.Fragment,{children:a})}},3166:e=>{e.exports={layout:"page_layout__5M9Hn",main:"page_main__D6lG8",content:"page_content__kyxRG",section:"page_section__ziwDt",sectionTitle:"page_sectionTitle__rQqSS",formGroup:"page_formGroup__gjSdj",label:"page_label__Jn9SV",radioGroup:"page_radioGroup__9Tm1F",radio:"page_radio__9NO9Y",checkbox:"page_checkbox__cQzYr",exportButton:"page_exportButton__PpLJA",errorMessage:"page_errorMessage__dvYFF",successMessage:"page_successMessage__JiyDv",downloadButton:"page_downloadButton__8JpTL",contentList:"page_contentList__QW2uS",warning:"page_warning__sS6iL",latestExport:"page_latestExport__w7hcW",error:"page_error__VDwCl",loading:"page_loading__7Sr4R"}},8427:e=>{e.exports={container:"DisclosurePanel_container__OSi_X",tabs:"DisclosurePanel_tabs__gWkna",tab:"DisclosurePanel_tab__9h3XA",tabActive:"DisclosurePanel_tabActive__r9vRK DisclosurePanel_tab__9h3XA",content:"DisclosurePanel_content__hWuMj",layer:"DisclosurePanel_layer__1l2ax",actionButton:"DisclosurePanel_actionButton__PTiss"}},4609:e=>{e.exports={frame:"SimulationFrame_frame__xGjXh"}},7811:e=>{e.exports={watermark:"SimulationWatermark_watermark__tdBPL"}},8795:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(436).createProxy)(String.raw`/Users/user/regintel-v2/apps/web/src/app/(app)/exports/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[283,322,109],()=>a(2690));module.exports=r})();