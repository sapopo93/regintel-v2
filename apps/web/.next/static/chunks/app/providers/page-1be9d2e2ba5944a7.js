(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{2752:function(e,t,i){Promise.resolve().then(i.bind(i,3189))},7345:function(e,t,i){"use strict";var r=i(1886);i.o(r,"useParams")&&i.d(t,{useParams:function(){return r.useParams}}),i.o(r,"usePathname")&&i.d(t,{usePathname:function(){return r.usePathname}}),i.o(r,"useRouter")&&i.d(t,{useRouter:function(){return r.useRouter}}),i.o(r,"useSearchParams")&&i.d(t,{useSearchParams:function(){return r.useSearchParams}})},3189:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var r=i(6969),n=i(5645),s=i(7345),a=i(161),o=i(1478),c=i(683),d=i.n(c);function l(){let e=(0,s.useRouter)(),[t,i]=(0,n.useState)(null),[c,l]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(!0),[m,v]=(0,n.useState)(!1),[g,_]=(0,n.useState)(null),y=()=>{f(!0),a.x1.getProviders().then(e=>{(0,o.Uu)(e,{strict:!0}),i(e)}).catch(e=>_(e.message)).finally(()=>f(!1))};(0,n.useEffect)(()=>{y()},[]);let S=async t=>{if(t.preventDefault(),_(null),!c.trim()){_("Provider name is required");return}v(!0);try{let t={providerName:c.trim(),orgRef:u.trim()||void 0},{provider:r,...n}=await a.x1.createProvider(t);l(""),h(""),i(e=>e?{...e,providers:[...e.providers,r]}:{...n,providers:[r]}),e.push("/facilities?provider=".concat(r.providerId))}catch(e){_(e instanceof Error?e.message:"Failed to create provider")}finally{v(!1)}},N=t=>{e.push("/facilities?provider=".concat(t.providerId))};return p?(0,r.jsx)("div",{className:d().layout,children:(0,r.jsx)("div",{className:d().loading,children:"Loading providers..."})}):g&&!t?(0,r.jsx)("div",{className:d().layout,children:(0,r.jsxs)("div",{className:d().error,children:["Error: ",g]})}):(0,r.jsx)("div",{className:d().layout,children:(0,r.jsxs)("main",{className:d().main,children:[(0,r.jsx)("div",{className:d().header,children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:d().kicker,children:"Onboarding"}),(0,r.jsx)("h1",{className:d().title,children:"Providers"}),(0,r.jsx)("p",{className:d().subtitle,children:"Create a provider and register facilities."})]})}),(0,r.jsxs)("section",{className:d().formCard,children:[(0,r.jsx)("h2",{className:d().sectionTitle,children:"Create Provider"}),g&&(0,r.jsx)("div",{className:d().error,children:g}),(0,r.jsxs)("form",{onSubmit:S,className:d().form,children:[(0,r.jsxs)("label",{className:d().label,children:["Provider Name ",(0,r.jsx)("span",{className:d().required,children:"*"}),(0,r.jsx)("input",{value:c,onChange:e=>l(e.target.value),className:d().input,disabled:m,"data-testid":"provider-name-input"})]}),(0,r.jsxs)("label",{className:d().label,children:["Organisation Reference (optional)",(0,r.jsx)("input",{value:u,onChange:e=>h(e.target.value),className:d().input,disabled:m,"data-testid":"provider-orgref-input"})]}),(0,r.jsx)("button",{type:"submit",className:d().submit,disabled:m,"data-testid":"primary-create-provider",children:m?"Creating...":"Create Provider"})]})]}),(0,r.jsxs)("section",{className:d().list,children:[(0,r.jsx)("h2",{className:d().sectionTitle,children:"Existing Providers"}),t&&0===t.providers.length?(0,r.jsx)("p",{className:d().empty,children:"No providers yet."}):(0,r.jsx)("div",{className:d().grid,children:null==t?void 0:t.providers.map(e=>(0,r.jsxs)("div",{className:d().card,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:d().cardTitle,children:e.providerName}),(0,r.jsxs)("p",{className:d().cardMeta,children:["Provider ID: ",e.providerId]}),e.orgRef&&(0,r.jsxs)("p",{className:d().cardMeta,children:["Org ref: ",e.orgRef]})]}),(0,r.jsx)("button",{type:"button",className:d().cardButton,onClick:()=>N(e),"data-testid":"provider-open-".concat(e.providerId),children:"Manage Facilities"})]},e.providerId))})]})]})})}},161:function(e,t,i){"use strict";i.d(t,{MS:function(){return s},x1:function(){return o}});var r=i(1478),n=i(1545);class s extends Error{constructor(e,t,i){super(e),this.status=t,this.response=i,this.name="ApiError"}}class a{async fetch(e,t){let i="".concat(this.config.baseUrl).concat(e),a=(0,n.bW)(),o=await fetch(i,{...t,headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{},...this.config.tenantId?{"X-Tenant-Id":this.config.tenantId}:{},...null==t?void 0:t.headers}});if(401===o.status||403===o.status){(0,n.Rn)();{let e=window.location.pathname+window.location.search;window.location.href="/login?next=".concat(encodeURIComponent(e))}}if(!o.ok){let e=await o.json().catch(()=>({})),t=e.error||o.statusText;throw new s("API request failed: ".concat(t),o.status,e)}let c=await o.json();return!function(e){let t=[];if(e.topicCatalogVersion||t.push("topicCatalogVersion"),e.topicCatalogHash||t.push("topicCatalogHash"),e.prsLogicVersion||t.push("prsLogicVersion"),e.prsLogicHash||t.push("prsLogicHash"),e.snapshotTimestamp||t.push("snapshotTimestamp"),e.domain||t.push("domain"),e.reportingDomain||t.push("reportingDomain"),t.length>0)throw new r.L2("API response missing constitutional metadata: ".concat(t.join(", ")),t)}(c),c}async getProviders(){return this.fetch("/v1/providers")}async createProvider(e){return this.fetch("/v1/providers",{method:"POST",body:JSON.stringify(e)})}async getProviderOverview(e,t){let i=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/overview").concat(i))}async getTopics(e,t){let i=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/topics").concat(i))}async getTopic(e,t,i){let r=i?"?facility=".concat(encodeURIComponent(i)):"";return this.fetch("/v1/providers/".concat(e,"/topics/").concat(t).concat(r))}async getMockSessions(e,t){let i=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/mock-sessions").concat(i))}async createMockSession(e,t,i){return this.fetch("/v1/providers/".concat(e,"/mock-sessions"),{method:"POST",body:JSON.stringify({topicId:t,facilityId:i})})}async getMockSession(e,t,i){let r=i?"?facility=".concat(encodeURIComponent(i)):"";return this.fetch("/v1/providers/".concat(e,"/mock-sessions/").concat(t).concat(r))}async submitAnswer(e,t,i){return this.fetch("/v1/providers/".concat(e,"/mock-sessions/").concat(t,"/answer"),{method:"POST",body:JSON.stringify({answer:i})})}async getFindings(e,t){let i=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/findings").concat(i))}async getFinding(e,t){return this.fetch("/v1/providers/".concat(e,"/findings/").concat(t))}async getEvidence(e,t){let i=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/evidence").concat(i))}async getAuditTrail(e){return this.fetch("/v1/providers/".concat(e,"/audit-trail"))}async generateExport(e,t){return this.fetch("/v1/providers/".concat(e,"/exports"),{method:"POST",body:JSON.stringify(t)})}async getExportStatus(e,t){let i=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/exports").concat(i))}async getFacilities(e){return this.fetch(e?"/v1/providers/".concat(e,"/facilities"):"/v1/facilities")}async onboardFacility(e){return this.fetch("/v1/facilities/onboard",{method:"POST",body:JSON.stringify(e)})}async createFacility(e){return this.fetch("/v1/providers/".concat(e.providerId,"/facilities"),{method:"POST",body:JSON.stringify(e)})}async getFacility(e){return this.fetch("/v1/facilities/".concat(e))}async createEvidenceBlob(e){return this.fetch("/v1/evidence/blobs",{method:"POST",body:JSON.stringify(e)})}async createFacilityEvidence(e){return this.fetch("/v1/facilities/".concat(e.facilityId,"/evidence"),{method:"POST",body:JSON.stringify(e)})}async getFacilityEvidence(e){return this.fetch("/v1/facilities/".concat(e,"/evidence"))}constructor(e){this.config=e}}let o=new a({baseUrl:"http://localhost:3001"})},1545:function(e,t,i){"use strict";i.d(t,{Rn:function(){return c},bW:function(){return s},sW:function(){return a},uB:function(){return o}});let r="regintel.auth.token",n="regintel.auth.role";function s(){return window.localStorage.getItem(r)}function a(){return window.localStorage.getItem(n)}function o(e,t){window.localStorage.setItem(r,e),window.localStorage.setItem(n,t)}function c(){window.localStorage.removeItem(r),window.localStorage.removeItem(n)}},3924:function(e,t,i){"use strict";i.d(t,{lE:function(){return s},qN:function(){return n},tx:function(){return r},y8:function(){return a}});let r="READINESS (MOCK) â€” NOT REGULATORY HISTORY",n={SYSTEM_MOCK:"SYSTEM_MOCK",ACTUAL_INSPECTION:"ACTUAL_INSPECTION",SELF_IDENTIFIED:"SELF_IDENTIFIED"},s={MOCK_SIMULATION:"MOCK_SIMULATION",REGULATORY_HISTORY:"REGULATORY_HISTORY"},a=[{id:"providers",label:"Providers",href:"/providers"},{id:"overview",label:"Overview",href:"/overview"},{id:"topics",label:"Topics",href:"/topics"},{id:"mock-session",label:"Mock Inspection",href:"/mock-session"},{id:"findings",label:"Findings",href:"/findings"},{id:"facilities",label:"Facilities",href:"/facilities"},{id:"evidence",label:"Evidence",href:"/evidence"},{id:"exports",label:"Exports",href:"/exports"},{id:"audit",label:"Audit Trail",href:"/audit"}]},1478:function(e,t,i){"use strict";i.d(t,{Eb:function(){return o},L2:function(){return n},Lg:function(){return a},Uu:function(){return s}});var r=i(3924);class n extends Error{constructor(e,t){super(e),this.missingRequirements=t,this.name="ConstitutionalViolationError"}}function s(e,t){let i=[],r=!!(e.topicCatalogVersion&&e.prsLogicVersion),s=!!(e.topicCatalogHash&&e.topicCatalogHash.length>0&&e.prsLogicHash&&e.prsLogicHash.length>0),a=!!e.snapshotTimestamp,o=!!e.domain;if(r||i.push("version"),s||i.push("hash"),a||i.push("timestamp"),o||i.push("domain"),(null==t?void 0:t.strict)&&i.length>0)throw new n("Constitutional UI violation: missing ".concat(i.join(", ")),i);return{valid:0===i.length,hasVersion:r,hasHash:s,hasTimestamp:a,hasDomain:o,missingRequirements:i}}function a(e){if(e.origin===r.qN.SYSTEM_MOCK&&e.reportingDomain===r.lE.REGULATORY_HISTORY)throw Error("Mock contamination detected: Finding ".concat(e.id," has origin=SYSTEM_MOCK ")+"in reportingDomain=REGULATORY_HISTORY. This violates regulatory/mock separation.")}function o(e){return e.origin===r.qN.SYSTEM_MOCK||e.reportingDomain===r.lE.MOCK_SIMULATION?{borderColor:"var(--color-simulation)",borderWidth:"4px"}:null}},683:function(e){e.exports={layout:"page_layout__UAop_",main:"page_main__ZhdX7",header:"page_header__Dr4Xw",kicker:"page_kicker__p00dr",title:"page_title___bHbd",subtitle:"page_subtitle__AkcH0",formCard:"page_formCard__qNOFV",sectionTitle:"page_sectionTitle__A4WUD",form:"page_form__2v6s_",label:"page_label__eZVpq",input:"page_input__OINs0",submit:"page_submit__paVVz",list:"page_list__iV8Ab",grid:"page_grid__85Ehf",card:"page_card__1B4my",cardTitle:"page_cardTitle__uRtZM",cardMeta:"page_cardMeta__WbWhM",cardButton:"page_cardButton__1AUBO",error:"page_error___mvFu",loading:"page_loading__UwLYS",empty:"page_empty__VzOem",required:"page_required__o_LPI"}}},function(e){e.O(0,[189,939,325,744],function(){return e(e.s=2752)}),_N_E=e.O()}]);