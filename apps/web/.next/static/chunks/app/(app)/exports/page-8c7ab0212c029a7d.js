(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[855],{266:function(e,a,s){Promise.resolve().then(s.bind(s,4219))},4219:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return x}});var t=s(6969),i=s(5645),r=s(7345),n=s(3565),o=s(8604),l=s(3436),c=s(9288),d=s(2074),u=s(161),p=s(1545),m=s(1478),h=s(6449),_=s.n(h);function x(){let e=(0,r.useSearchParams)(),a=e.get("provider"),s=e.get("facility"),[h,x]=(0,i.useState)(null),[g,v]=(0,i.useState)(null),[j,N]=(0,i.useState)("BLUE_OCEAN_BOARD"),[f,b]=(0,i.useState)(!0),[C,y]=(0,i.useState)(!1),[E,S]=(0,i.useState)(null),[D,k]=(0,i.useState)(null),[w,L]=(0,i.useState)(null);(0,i.useEffect)(()=>{a&&s&&Promise.all([u.x1.getProviderOverview(a,s),u.x1.getExportStatus(a,s)]).then(e=>{let[a,s]=e;(0,m.Uu)(s,{strict:!0}),x(a),v(s)}).catch(e=>S(e.message))},[a,s]);let T=(0,p.sW)(),A="true"===e.get("enableAuditExport"),P="FOUNDER"===T||A&&!1,B=e=>"BLUE_OCEAN_BOARD"===e||"BLUE_OCEAN"===e?"Blue Ocean Report (Board Pack)":"BLUE_OCEAN_AUDIT"===e?"Blue Ocean Report (Audit Pack — Internal)":"CSV"===e?"CSV (Spreadsheet)":"PDF"===e?"PDF (Document)":e,V=g?g.availableFormats.filter(e=>"BLUE_OCEAN_AUDIT"!==e||P):[];(0,i.useEffect)(()=>{if(g&&!V.includes(j)){var e;N(null!==(e=V[0])&&void 0!==e?e:"PDF")}},[g,V,j]);let O=async()=>{if(!a||!s){k("No provider or facility selected");return}y(!0),k(null),L(null);try{let e=await u.x1.generateExport(a,{facilityId:s,format:j,includeWatermark:f}),t=(0,p.bW)();t?L("".concat(e.downloadUrl,"?token=").concat(encodeURIComponent(t))):L(e.downloadUrl)}catch(e){k(e.message)}finally{y(!1)}};return a&&s?E?(0,t.jsx)("div",{className:_().layout,children:(0,t.jsxs)("div",{className:_().error,children:["Error: ",E]})}):h&&g?(0,t.jsx)(d.q,{reportingDomain:g.reportingDomain,children:(0,t.jsxs)("div",{className:_().layout,children:[(0,t.jsx)(n.Y,{providerName:h.provider.providerName,snapshotDate:h.provider.asOf,status:h.provider.prsState,topicCatalogVersion:g.topicCatalogVersion,prsLogicVersion:g.prsLogicVersion,topicsCompleted:h.topicsCompleted,totalTopics:h.totalTopics}),(0,t.jsxs)("main",{className:_().main,children:[(0,t.jsx)(o.m,{title:"Export Readiness Report",subtitle:h.facility?"".concat(h.provider.providerName," - ").concat(h.facility.facilityName," | Generate export"):"".concat(h.provider.providerName," | Generate export"),topicCatalogVersion:g.topicCatalogVersion,topicCatalogHash:g.topicCatalogHash,prsLogicVersion:g.prsLogicVersion,prsLogicHash:g.prsLogicHash,snapshotTimestamp:g.snapshotTimestamp,domain:g.domain,reportingDomain:g.reportingDomain}),(0,t.jsx)(l.V,{summary:(0,t.jsxs)("div",{className:_().section,children:[(0,t.jsx)("h2",{className:_().sectionTitle,children:"Export Configuration"}),(0,t.jsxs)("div",{className:_().formGroup,children:[(0,t.jsx)("label",{className:_().label,children:"Format"}),(0,t.jsx)("div",{className:_().radioGroup,children:V.map(e=>(0,t.jsxs)("label",{className:_().radio,children:[(0,t.jsx)("input",{type:"radio",value:e,checked:j===e,onChange:e=>N(e.target.value)}),(0,t.jsx)("span",{children:B(e)})]},e))})]}),(0,t.jsx)("div",{className:_().formGroup,children:(0,t.jsxs)("label",{className:_().checkbox,children:[(0,t.jsx)("input",{type:"checkbox",checked:f,onChange:e=>b(e.target.checked)}),(0,t.jsxs)("span",{children:["Include watermark: ",g.watermark]})]})}),(0,t.jsx)("button",{className:_().exportButton,onClick:O,disabled:C,"data-testid":"primary-generate-export",children:C?"Generating...":"Generate ".concat(B(j))}),D&&(0,t.jsxs)("div",{className:_().errorMessage,children:[D,(D.includes("No completed session")||D.includes("Conflict"))&&(0,t.jsx)("div",{style:{marginTop:"8px",fontSize:"0.9em"},children:'\uD83D\uDCA1 Tip: Complete a mock inspection session first. Navigate to "Mock Session" from the sidebar.'})]}),w&&(0,t.jsxs)("div",{className:_().section,children:[(0,t.jsx)("h2",{className:_().sectionTitle,children:"Export Ready"}),(0,t.jsx)("p",{className:_().successMessage,children:"Your export has been generated."}),(0,t.jsxs)("a",{href:w,download:!0,className:_().downloadButton,children:["Download ",B(j)]})]})]}),evidence:(0,t.jsxs)("div",{className:_().section,children:[(0,t.jsx)("h2",{className:_().sectionTitle,children:"Export Contents"}),(0,t.jsxs)("ul",{className:_().contentList,children:[(0,t.jsx)("li",{children:"Session metadata (ID, provider, versions, hashes)"}),(0,t.jsx)("li",{children:"Topic Catalog version and hash"}),(0,t.jsx)("li",{children:"PRS Logic Profile version and hash"}),(0,t.jsx)("li",{children:"All findings from mock sessions"}),(0,t.jsx)("li",{children:"Evidence coverage statistics"}),(0,t.jsx)("li",{children:"Watermark on every page/row (if enabled)"})]}),(0,t.jsxs)("div",{className:_().warning,children:[(0,t.jsx)("strong",{children:"Note:"})," Exports NEVER include regulatory history findings. All exported findings have origin=SYSTEM_MOCK."]}),g.latestExport&&(0,t.jsxs)("div",{className:_().latestExport,children:["Latest export: ",g.latestExport.exportId," (",g.latestExport.format,")"]})]}),trace:(0,t.jsx)(c.I,{topicCatalogVersion:g.topicCatalogVersion,topicCatalogHash:g.topicCatalogHash,prsLogicVersion:g.prsLogicVersion,prsLogicHash:g.prsLogicHash,snapshotTimestamp:g.snapshotTimestamp,domain:g.domain,reportingDomain:g.reportingDomain})})]})]})}):(0,t.jsx)("div",{className:_().layout,children:(0,t.jsx)("div",{className:_().loading,children:"Loading..."})}):(0,t.jsx)("div",{className:_().layout,children:(0,t.jsx)("div",{className:_().error,children:"No provider or facility selected"})})}},3436:function(e,a,s){"use strict";s.d(a,{V:function(){return o}});var t=s(6969),i=s(5645),r=s(2968),n=s.n(r);function o(e){var a,s,r,o,l;let{summary:c,evidence:d,trace:u,labels:p,actions:m}=e,[h,_]=(0,i.useState)("summary"),x=null!==(a=null==p?void 0:p.summary)&&void 0!==a?a:"Summary",g=null!==(s=null==p?void 0:p.evidence)&&void 0!==s?s:"Evidence",v=null!==(r=null==p?void 0:p.trace)&&void 0!==r?r:"Trace",j=null!==(o=null==m?void 0:m.showEvidence)&&void 0!==o?o:"Show Evidence →",N=null!==(l=null==m?void 0:m.showTrace)&&void 0!==l?l:"Show Trace →";return(0,t.jsxs)("div",{className:n().container,children:[(0,t.jsxs)("div",{className:n().tabs,children:[(0,t.jsx)("button",{className:"summary"===h?n().tabActive:n().tab,onClick:()=>_("summary"),children:x}),(0,t.jsx)("button",{className:"evidence"===h?n().tabActive:n().tab,onClick:()=>_("evidence"),disabled:"summary"===h,children:g}),(0,t.jsx)("button",{className:"trace"===h?n().tabActive:n().tab,onClick:()=>_("trace"),disabled:"trace"!==h,children:v})]}),(0,t.jsxs)("div",{className:n().content,children:["summary"===h&&(0,t.jsxs)("div",{className:n().layer,children:[c,(0,t.jsx)("button",{className:n().actionButton,onClick:()=>_("evidence"),children:j})]}),"evidence"===h&&(0,t.jsxs)("div",{className:n().layer,children:[d,(0,t.jsx)("button",{className:n().actionButton,onClick:()=>_("trace"),children:N})]}),"trace"===h&&(0,t.jsx)("div",{className:n().layer,children:u})]})]})}},2074:function(e,a,s){"use strict";s.d(a,{q:function(){return u}});var t=s(6969),i=s(1478),r=s(3924),n=s(7186),o=s.n(n);function l(){return(0,t.jsx)("div",{className:o().watermark,"aria-hidden":"true",children:r.tx})}var c=s(6375),d=s.n(c);function u(e){let{origin:a,reportingDomain:s,children:r}=e,n=(0,i.Eb)({origin:a,reportingDomain:s});return n?(0,t.jsxs)("div",{className:d().frame,style:{borderColor:n.borderColor,borderWidth:n.borderWidth},children:[(0,t.jsx)(l,{}),r]}):(0,t.jsx)(t.Fragment,{children:r})}},6449:function(e){e.exports={layout:"page_layout__5M9Hn",main:"page_main__D6lG8",content:"page_content__kyxRG",section:"page_section__ziwDt",sectionTitle:"page_sectionTitle__rQqSS",formGroup:"page_formGroup__gjSdj",label:"page_label__Jn9SV",radioGroup:"page_radioGroup__9Tm1F",radio:"page_radio__9NO9Y",checkbox:"page_checkbox__cQzYr",exportButton:"page_exportButton__PpLJA",errorMessage:"page_errorMessage__dvYFF",successMessage:"page_successMessage__JiyDv",downloadButton:"page_downloadButton__8JpTL",contentList:"page_contentList__QW2uS",warning:"page_warning__sS6iL",latestExport:"page_latestExport__w7hcW",error:"page_error__VDwCl",loading:"page_loading__7Sr4R"}},2968:function(e){e.exports={container:"DisclosurePanel_container__OSi_X",tabs:"DisclosurePanel_tabs__gWkna",tab:"DisclosurePanel_tab__9h3XA",tabActive:"DisclosurePanel_tabActive__r9vRK DisclosurePanel_tab__9h3XA",content:"DisclosurePanel_content__hWuMj",layer:"DisclosurePanel_layer__1l2ax",actionButton:"DisclosurePanel_actionButton__PTiss"}},6375:function(e){e.exports={frame:"SimulationFrame_frame__xGjXh"}},7186:function(e){e.exports={watermark:"SimulationWatermark_watermark__tdBPL"}}},function(e){e.O(0,[357,33,365,939,325,744],function(){return e(e.s=266)}),_N_E=e.O()}]);