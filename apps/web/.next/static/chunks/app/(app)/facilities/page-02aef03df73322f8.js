(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{4564:function(a,i,e){Promise.resolve().then(e.bind(e,3889))},3889:function(a,i,e){"use strict";e.r(i),e.d(i,{default:function(){return m}});var s=e(6969),t=e(5645),l=e(7345),c=e(3565),o=e(8604),r=e(9288),n=e(161),d=e(1478),p=e(9543),h=e.n(p);function m(){var a,i;let e=(0,l.useSearchParams)(),p=(0,l.useRouter)(),m=e.get("provider"),[g,_]=(0,t.useState)(null),[u,f]=(0,t.useState)(!0),[v,y]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(!m){y("Provider ID is required"),f(!1);return}n.x1.getFacilities(m||void 0).then(a=>{(0,d.Uu)(a,{strict:!0}),_(a)}).catch(a=>y(a.message)).finally(()=>f(!1))},[m]);let x=a=>{p.push("/overview?provider=".concat(m,"&facility=").concat(a))},N=g?{providerName:(null===(a=g.provider)||void 0===a?void 0:a.providerName)||"Provider",snapshotDate:(null===(i=g.provider)||void 0===i?void 0:i.asOf)||g.snapshotTimestamp,topicCatalogVersion:g.topicCatalogVersion,prsLogicVersion:g.prsLogicVersion}:{providerName:"Loading...",snapshotDate:new Date().toISOString(),topicCatalogVersion:"v1",prsLogicVersion:"v1"};return(0,s.jsxs)("div",{className:h().layout,children:[(0,s.jsx)(c.Y,{...N}),(0,s.jsx)("main",{className:h().main,children:u?(0,s.jsx)("div",{className:h().loading,children:"Loading facilities..."}):v||!g?(0,s.jsxs)("div",{className:h().error,children:["Error: ",v||"Failed to load facilities"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.m,{title:"Facilities",subtitle:"".concat(g.totalCount," facilities registered"),topicCatalogVersion:g.topicCatalogVersion,topicCatalogHash:g.topicCatalogHash,prsLogicVersion:g.prsLogicVersion,prsLogicHash:g.prsLogicHash,snapshotTimestamp:g.snapshotTimestamp,domain:g.domain,reportingDomain:g.reportingDomain}),(0,s.jsx)(r.I,{topicCatalogVersion:g.topicCatalogVersion,topicCatalogHash:g.topicCatalogHash,prsLogicVersion:g.prsLogicVersion,prsLogicHash:g.prsLogicHash,snapshotTimestamp:g.snapshotTimestamp,domain:g.domain,reportingDomain:g.reportingDomain}),(0,s.jsx)("div",{className:h().actions,children:(0,s.jsx)("button",{className:h().addButton,onClick:()=>{p.push("/facilities/new?provider=".concat(m))},"data-testid":"add-facility-button",children:"Add Facility"})}),0===g.facilities.length?(0,s.jsxs)("div",{className:h().empty,children:[(0,s.jsx)("p",{children:"No facilities registered yet."}),(0,s.jsx)("p",{children:'Click "Add Facility" to register your first facility.'})]}):(0,s.jsx)("div",{className:h().facilitiesList,children:g.facilities.map(a=>(0,s.jsxs)("div",{className:h().facilityCard,onClick:()=>x(a.id),"data-testid":"facility-card-".concat(a.id),children:[(0,s.jsx)("h3",{className:h().facilityName,children:a.facilityName}),(0,s.jsxs)("div",{className:h().facilityDetails,children:[(0,s.jsxs)("div",{className:h().detailRow,children:[(0,s.jsx)("span",{className:h().detailLabel,children:"CQC Location ID:"}),(0,s.jsx)("span",{className:h().detailValue,children:a.cqcLocationId})]}),(0,s.jsxs)("div",{className:h().detailRow,children:[(0,s.jsx)("span",{className:h().detailLabel,children:"Service Type:"}),(0,s.jsx)("span",{className:h().detailValue,children:a.serviceType})]}),(0,s.jsxs)("div",{className:h().detailRow,children:[(0,s.jsx)("span",{className:h().detailLabel,children:"Address:"}),(0,s.jsxs)("span",{className:h().detailValue,children:[a.addressLine1,", ",a.townCity,", ",a.postcode]})]}),a.capacity&&(0,s.jsxs)("div",{className:h().detailRow,children:[(0,s.jsx)("span",{className:h().detailLabel,children:"Capacity:"}),(0,s.jsx)("span",{className:h().detailValue,children:a.capacity})]})]}),(0,s.jsxs)("div",{className:h().facilityHash,children:["Hash: ",a.facilityHash.substring(0,16),"..."]})]},a.id))})]})})]})}},9543:function(a){a.exports={layout:"page_layout__iJqGt",main:"page_main__oWaaw",actions:"page_actions__hacnN",addButton:"page_addButton__MGBOI",facilitiesList:"page_facilitiesList__gxkDO",facilityCard:"page_facilityCard__GBq0u",facilityName:"page_facilityName__4goeX",facilityDetails:"page_facilityDetails__ZVtly",detailRow:"page_detailRow__fCPhr",detailLabel:"page_detailLabel__T4k6b",detailValue:"page_detailValue__E_Ekh",facilityHash:"page_facilityHash__BIo_y",empty:"page_empty__zZCh0",loading:"page_loading__kxCxx",error:"page_error__WwAYX"}}},function(a){a.O(0,[357,33,365,939,325,744],function(){return a(a.s=4564)}),_N_E=a.O()}]);