(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{4001:function(e,s,i){Promise.resolve().then(i.bind(i,4928))},4928:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return v}});var t=i(6969),a=i(5645),n=i(7345),r=i(2335),o=i(3565),c=i(8604),l=i(3436),d=i(9288),u=i(2074),m=i(161),p=i(1478),h=i(4889),_=i.n(h);function v(){let e=(0,n.useSearchParams)(),s=(0,n.useParams)(),i=e.get("provider"),h=e.get("facility"),v=s.sessionId,[x,j]=(0,a.useState)(null),[g,b]=(0,a.useState)(null),[f,N]=(0,a.useState)(""),[S,y]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!0),[k,P]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!i||!h){P("Provider and facility are required"),C(!1);return}Promise.all([m.x1.getProviderOverview(i,h),m.x1.getMockSession(i,v,h)]).then(e=>{let[s,i]=e;(0,p.Uu)(i,{strict:!0}),j(s),b(i)}).catch(e=>P(e.message)).finally(()=>C(!1))},[i,h,v]);let D=async()=>{if(!i||!f.trim()){P("Answer is required");return}y(!0),P(null);try{let e=await m.x1.submitAnswer(i,v,f.trim());b(s=>s?{...s,...e}:s),N("")}catch(e){P(e instanceof Error?e.message:"Failed to submit answer")}finally{y(!1)}};return w?(0,t.jsx)("div",{className:_().layout,children:(0,t.jsx)("div",{className:_().loading,children:"Loading..."})}):!k&&g&&x?(0,t.jsx)(u.q,{reportingDomain:g.reportingDomain,children:(0,t.jsxs)("div",{className:_().layout,children:[(0,t.jsx)(o.Y,{providerName:x.provider.providerName,snapshotDate:x.provider.asOf,status:x.provider.prsState,topicCatalogVersion:g.topicCatalogVersion,prsLogicVersion:g.prsLogicVersion,topicsCompleted:x.topicsCompleted,totalTopics:x.totalTopics}),(0,t.jsxs)("main",{className:_().main,children:[(0,t.jsx)(c.m,{title:"Session ".concat(g.sessionId),subtitle:"Mock inspection session detail",topicCatalogVersion:g.topicCatalogVersion,topicCatalogHash:g.topicCatalogHash,prsLogicVersion:g.prsLogicVersion,prsLogicHash:g.prsLogicHash,snapshotTimestamp:g.snapshotTimestamp,domain:g.domain,reportingDomain:g.reportingDomain}),(0,t.jsx)(l.V,{summary:(0,t.jsxs)("div",{className:_().section,children:[(0,t.jsx)("h2",{className:_().sectionTitle,children:"Session Information"}),(0,t.jsxs)("dl",{className:_().definitionList,children:[(0,t.jsx)("dt",{children:"Session ID"}),(0,t.jsx)("dd",{children:g.sessionId}),(0,t.jsx)("dt",{children:"Topic ID"}),(0,t.jsx)("dd",{children:g.topicId}),(0,t.jsx)("dt",{children:"Status"}),(0,t.jsx)("dd",{className:_()[g.status.toLowerCase()],children:g.status}),(0,t.jsx)("dt",{children:"Follow-ups Used"}),(0,t.jsxs)("dd",{children:[g.followUpsUsed," / ",g.maxFollowUps]}),(0,t.jsx)("dt",{children:"Created At"}),(0,t.jsx)("dd",{children:new Date(g.createdAt).toLocaleString()}),g.completedAt&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("dt",{children:"Completed At"}),(0,t.jsx)("dd",{children:new Date(g.completedAt).toLocaleString()})]})]})]}),evidence:(0,t.jsxs)("div",{className:_().section,children:[(0,t.jsx)("h2",{className:_().sectionTitle,children:"Provider Snapshot"}),(0,t.jsxs)("dl",{className:_().definitionList,children:[(0,t.jsx)("dt",{children:"Provider ID"}),(0,t.jsx)("dd",{children:g.providerSnapshot.providerId}),(0,t.jsx)("dt",{children:"Provider Name"}),(0,t.jsx)("dd",{children:g.providerSnapshot.providerName}),(0,t.jsx)("dt",{children:"As Of"}),(0,t.jsx)("dd",{children:g.providerSnapshot.asOf}),(0,t.jsx)("dt",{children:"PRS State"}),(0,t.jsx)("dd",{children:g.providerSnapshot.prsState}),(0,t.jsx)("dt",{children:"Registered Beds"}),(0,t.jsx)("dd",{children:g.providerSnapshot.registeredBeds}),(0,t.jsx)("dt",{children:"Service Types"}),(0,t.jsx)("dd",{children:g.providerSnapshot.serviceTypes.join(", ")})]})]}),trace:(0,t.jsx)(d.I,{topicCatalogVersion:g.topicCatalogVersion,topicCatalogHash:g.topicCatalogHash,prsLogicVersion:g.prsLogicVersion,prsLogicHash:g.prsLogicHash,snapshotTimestamp:g.snapshotTimestamp,domain:g.domain,reportingDomain:g.reportingDomain})}),(0,t.jsxs)("div",{className:_().section,children:[(0,t.jsx)("h2",{className:_().sectionTitle,children:"Submit Answer"}),(0,t.jsx)("textarea",{className:_().answerInput,value:f,onChange:e=>N(e.target.value),placeholder:"Provide a response to complete the session...",rows:4,"data-testid":"mock-session-answer"}),(0,t.jsx)("button",{className:_().submitButton,onClick:D,disabled:S||!f.trim(),"data-testid":"primary-submit-answer",children:S?"Submitting...":"Submit Answer"})]}),(0,t.jsx)("div",{className:_().actions,children:(0,t.jsx)(r.default,{href:"/mock-session?provider=".concat(i,"&facility=").concat(h),className:_().backButton,children:"← Back to Sessions"})})]})]})}):(0,t.jsx)("div",{className:_().layout,children:(0,t.jsxs)("div",{className:_().error,children:["Error: ",k||"Failed to load data"]})})}},3436:function(e,s,i){"use strict";i.d(s,{V:function(){return o}});var t=i(6969),a=i(5645),n=i(2968),r=i.n(n);function o(e){var s,i,n,o,c;let{summary:l,evidence:d,trace:u,labels:m,actions:p}=e,[h,_]=(0,a.useState)("summary"),v=null!==(s=null==m?void 0:m.summary)&&void 0!==s?s:"Summary",x=null!==(i=null==m?void 0:m.evidence)&&void 0!==i?i:"Evidence",j=null!==(n=null==m?void 0:m.trace)&&void 0!==n?n:"Trace",g=null!==(o=null==p?void 0:p.showEvidence)&&void 0!==o?o:"Show Evidence →",b=null!==(c=null==p?void 0:p.showTrace)&&void 0!==c?c:"Show Trace →";return(0,t.jsxs)("div",{className:r().container,children:[(0,t.jsxs)("div",{className:r().tabs,children:[(0,t.jsx)("button",{className:"summary"===h?r().tabActive:r().tab,onClick:()=>_("summary"),children:v}),(0,t.jsx)("button",{className:"evidence"===h?r().tabActive:r().tab,onClick:()=>_("evidence"),disabled:"summary"===h,children:x}),(0,t.jsx)("button",{className:"trace"===h?r().tabActive:r().tab,onClick:()=>_("trace"),disabled:"trace"!==h,children:j})]}),(0,t.jsxs)("div",{className:r().content,children:["summary"===h&&(0,t.jsxs)("div",{className:r().layer,children:[l,(0,t.jsx)("button",{className:r().actionButton,onClick:()=>_("evidence"),children:g})]}),"evidence"===h&&(0,t.jsxs)("div",{className:r().layer,children:[d,(0,t.jsx)("button",{className:r().actionButton,onClick:()=>_("trace"),children:b})]}),"trace"===h&&(0,t.jsx)("div",{className:r().layer,children:u})]})]})}},2074:function(e,s,i){"use strict";i.d(s,{q:function(){return u}});var t=i(6969),a=i(1478),n=i(3924),r=i(7186),o=i.n(r);function c(){return(0,t.jsx)("div",{className:o().watermark,"aria-hidden":"true",children:n.tx})}var l=i(6375),d=i.n(l);function u(e){let{origin:s,reportingDomain:i,children:n}=e,r=(0,a.Eb)({origin:s,reportingDomain:i});return r?(0,t.jsxs)("div",{className:d().frame,style:{borderColor:r.borderColor,borderWidth:r.borderWidth},children:[(0,t.jsx)(c,{}),n]}):(0,t.jsx)(t.Fragment,{children:n})}},4889:function(e){e.exports={layout:"page_layout__rTpsA",main:"page_main__Vqfj4",details:"page_details___t_nh",section:"page_section__XWXa6",answerInput:"page_answerInput___tqty",submitButton:"page_submitButton__syaUN",sectionTitle:"page_sectionTitle__8S883",definitionList:"page_definitionList__hvI2V",in_progress:"page_in_progress__bkx3G",completed:"page_completed__1yGQ1",abandoned:"page_abandoned__R6480",actions:"page_actions__1R1zt",backButton:"page_backButton__G1w1R",loading:"page_loading__yPQFe",error:"page_error__dn58_"}},2968:function(e){e.exports={container:"DisclosurePanel_container__OSi_X",tabs:"DisclosurePanel_tabs__gWkna",tab:"DisclosurePanel_tab__9h3XA",tabActive:"DisclosurePanel_tabActive__r9vRK DisclosurePanel_tab__9h3XA",content:"DisclosurePanel_content__hWuMj",layer:"DisclosurePanel_layer__1l2ax",actionButton:"DisclosurePanel_actionButton__PTiss"}},6375:function(e){e.exports={frame:"SimulationFrame_frame__xGjXh"}},7186:function(e){e.exports={watermark:"SimulationWatermark_watermark__tdBPL"}}},function(e){e.O(0,[357,33,365,939,325,744],function(){return e(e.s=4001)}),_N_E=e.O()}]);