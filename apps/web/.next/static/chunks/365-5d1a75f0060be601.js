(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{3726:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var i=n(6969),a=n(5645),s=n(9473),r=n(5572),c=n.n(r);function o(e){let{hash:t,label:n,showCopy:r=!0}=e,[o,l]=(0,a.useState)(!1),d=async()=>{await navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3)},u=(0,s.cJ)(t);return(0,i.jsxs)("div",{className:c().container,children:[n&&(0,i.jsxs)("span",{className:c().label,children:[n,":"]}),(0,i.jsx)("code",{className:c().hash,title:t,children:u}),r&&(0,i.jsx)("button",{onClick:d,className:c().copyButton,"aria-label":"Copy hash",children:o?"✓":"Copy"})]})}},9288:function(e,t,n){"use strict";n.d(t,{I:function(){return f}});var i=n(6969),a=n(3726),s=n(1880),r=n(9473),c=n(3102),o=n.n(c);function l(e){let{timestamp:t,label:n,dateOnly:a=!1}=e,s=(0,r.i$)(t,{dateOnly:a});return(0,i.jsxs)("div",{className:o().container,children:[n&&(0,i.jsxs)("span",{className:o().label,children:[n,":"]}),(0,i.jsx)("time",{className:o().timestamp,dateTime:t,children:s})]})}var d=n(2207),u=n.n(d);function h(e){let{domain:t}=e;return(0,i.jsx)("span",{className:u().badge,"data-domain":t,children:t})}var p=n(5366),m=n.n(p);function f(e){let{topicCatalogVersion:t,topicCatalogHash:n,prsLogicVersion:r,prsLogicHash:c,snapshotTimestamp:o,domain:d,compact:u=!1}=e;if(u){let e=n.replace("sha256:","").substring(0,6),a=c.replace("sha256:","").substring(0,6);return(0,i.jsxs)("div",{className:m().containerCompact,children:[(0,i.jsx)(h,{domain:d}),(0,i.jsx)("span",{className:m().frozenLabel,children:"• Inspection Snapshot (Frozen)"}),(0,i.jsx)(l,{timestamp:o,label:"As-of",dateOnly:!0}),(0,i.jsx)("span",{className:m().separator,children:"|"}),(0,i.jsxs)("span",{className:m().version,title:"Topic Catalog: ".concat(n,"\nPRS Logic: ").concat(c),children:["TC ",t," (",e,"…) \xb7 PRS ",r," (",a,"…)"]})]})}return(0,i.jsxs)("div",{className:m().container,children:[(0,i.jsxs)("div",{className:m().row,children:[(0,i.jsx)(h,{domain:d}),(0,i.jsx)(l,{timestamp:o,label:"Snapshot"})]}),(0,i.jsxs)("div",{className:m().row,children:[(0,i.jsx)(s.O,{label:"Topic Catalog",version:t}),(0,i.jsx)(a.y,{hash:n})]}),(0,i.jsxs)("div",{className:m().row,children:[(0,i.jsx)(s.O,{label:"PRS Logic",version:r}),(0,i.jsx)(a.y,{hash:c})]})]})}},1880:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var i=n(6969),a=n(8487),s=n.n(a);function r(e){let{label:t,version:n,verified:a=!0}=e;return(0,i.jsxs)("div",{className:s().container,children:[(0,i.jsx)("span",{className:s().label,children:t}),(0,i.jsx)("span",{className:s().version,children:n}),a&&(0,i.jsx)("span",{className:s().checkmark,children:"✓"})]})}},8604:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(6969),a=n(9288),s=n(1689),r=n.n(s);function c(e){let{title:t,subtitle:n,actions:s,...c}=e;return(0,i.jsxs)("header",{className:r().header,children:[(0,i.jsxs)("div",{className:r().titleRow,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:r().title,children:t}),n&&(0,i.jsx)("p",{className:r().subtitle,children:n})]}),s&&(0,i.jsx)("div",{className:r().actions,children:s})]}),(0,i.jsx)(a.I,{...c,compact:!0})]})}},3565:function(e,t,n){"use strict";n.d(t,{Y:function(){return d}});var i=n(6969),a=n(2335),s=n(7345),r=n(1880),c=n(3924),o=n(2298),l=n.n(o);function d(e){let{providerName:t,snapshotDate:n,status:o,topicCatalogVersion:d,prsLogicVersion:u,topicsCompleted:h,totalTopics:p}=e,m=(0,s.usePathname)(),f=(0,s.useSearchParams)(),v=f.get("provider"),_=f.get("facility"),g=(null==o?void 0:o.trim())?o:"STATUS UNAVAILABLE";return(0,i.jsxs)("aside",{className:l().sidebar,children:[(0,i.jsxs)("div",{className:l().header,children:[(0,i.jsx)("div",{className:l().providerName,children:t}),(0,i.jsxs)("div",{className:l().snapshot,children:["Snapshot: ",n]}),(0,i.jsxs)("div",{className:l().status,children:[(0,i.jsx)("span",{className:l().statusLabel,children:"Last Recorded Rating"}),(0,i.jsx)("span",{className:l().statusValue,children:g}),(0,i.jsx)("span",{className:l().statusSource,children:"Source: CQC"})]})]}),(0,i.jsx)("nav",{className:l().nav,children:c.y8.map(e=>{let t=m===e.href,n="topics"===e.id&&void 0!==h&&void 0!==p?"".concat(e.label," (").concat(h,"/").concat(p," complete)"):e.label,s=new URLSearchParams;v&&s.set("provider",v),_&&s.set("facility",_);let r=s.toString()?"".concat(e.href,"?").concat(s.toString()):e.href;return(0,i.jsx)(a.default,{href:r,className:t?l().navItemActive:l().navItem,"data-testid":"sidebar-link-".concat(e.id),children:n},e.id)})}),(0,i.jsxs)("div",{className:l().systemStatus,children:[(0,i.jsx)(r.O,{label:"Topic Catalog",version:d,verified:!0}),(0,i.jsx)(r.O,{label:"PRS Logic",version:u,verified:!0}),(0,i.jsxs)("div",{className:l().statusItem,children:[(0,i.jsx)("span",{children:"Deterministic"}),(0,i.jsx)("span",{className:l().checkmark,children:"✓"})]})]})]})}},161:function(e,t,n){"use strict";n.d(t,{MS:function(){return s},x1:function(){return c}});var i=n(1478),a=n(1545);class s extends Error{constructor(e,t,n){super(e),this.status=t,this.response=n,this.name="ApiError"}}class r{async fetch(e,t){let n="".concat(this.config.baseUrl).concat(e),r=(0,a.bW)(),c=await fetch(n,{...t,headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{},...this.config.tenantId?{"X-Tenant-Id":this.config.tenantId}:{},...null==t?void 0:t.headers}});if(401===c.status||403===c.status){(0,a.Rn)();{let e=window.location.pathname+window.location.search;window.location.href="/login?next=".concat(encodeURIComponent(e))}}if(!c.ok){let e=await c.json().catch(()=>({})),t=e.error||c.statusText;throw new s("API request failed: ".concat(t),c.status,e)}let o=await c.json();return!function(e){let t=[];if(e.topicCatalogVersion||t.push("topicCatalogVersion"),e.topicCatalogHash||t.push("topicCatalogHash"),e.prsLogicVersion||t.push("prsLogicVersion"),e.prsLogicHash||t.push("prsLogicHash"),e.snapshotTimestamp||t.push("snapshotTimestamp"),e.domain||t.push("domain"),e.reportingDomain||t.push("reportingDomain"),t.length>0)throw new i.L2("API response missing constitutional metadata: ".concat(t.join(", ")),t)}(o),o}async getProviders(){return this.fetch("/v1/providers")}async createProvider(e){return this.fetch("/v1/providers",{method:"POST",body:JSON.stringify(e)})}async getProviderOverview(e,t){let n=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/overview").concat(n))}async getTopics(e,t){let n=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/topics").concat(n))}async getTopic(e,t,n){let i=n?"?facility=".concat(encodeURIComponent(n)):"";return this.fetch("/v1/providers/".concat(e,"/topics/").concat(t).concat(i))}async getMockSessions(e,t){let n=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/mock-sessions").concat(n))}async createMockSession(e,t,n){return this.fetch("/v1/providers/".concat(e,"/mock-sessions"),{method:"POST",body:JSON.stringify({topicId:t,facilityId:n})})}async getMockSession(e,t,n){let i=n?"?facility=".concat(encodeURIComponent(n)):"";return this.fetch("/v1/providers/".concat(e,"/mock-sessions/").concat(t).concat(i))}async submitAnswer(e,t,n){return this.fetch("/v1/providers/".concat(e,"/mock-sessions/").concat(t,"/answer"),{method:"POST",body:JSON.stringify({answer:n})})}async getFindings(e,t){let n=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/findings").concat(n))}async getFinding(e,t){return this.fetch("/v1/providers/".concat(e,"/findings/").concat(t))}async getEvidence(e,t){let n=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/evidence").concat(n))}async getAuditTrail(e){return this.fetch("/v1/providers/".concat(e,"/audit-trail"))}async generateExport(e,t){return this.fetch("/v1/providers/".concat(e,"/exports"),{method:"POST",body:JSON.stringify(t)})}async getExportStatus(e,t){let n=t?"?facility=".concat(encodeURIComponent(t)):"";return this.fetch("/v1/providers/".concat(e,"/exports").concat(n))}async getFacilities(e){return this.fetch(e?"/v1/providers/".concat(e,"/facilities"):"/v1/facilities")}async onboardFacility(e){return this.fetch("/v1/facilities/onboard",{method:"POST",body:JSON.stringify(e)})}async createFacility(e){return this.fetch("/v1/providers/".concat(e.providerId,"/facilities"),{method:"POST",body:JSON.stringify(e)})}async getFacility(e){return this.fetch("/v1/facilities/".concat(e))}async createEvidenceBlob(e){return this.fetch("/v1/evidence/blobs",{method:"POST",body:JSON.stringify(e)})}async createFacilityEvidence(e){return this.fetch("/v1/facilities/".concat(e.facilityId,"/evidence"),{method:"POST",body:JSON.stringify(e)})}async getFacilityEvidence(e){return this.fetch("/v1/facilities/".concat(e,"/evidence"))}constructor(e){this.config=e}}let c=new r({baseUrl:"http://localhost:3001"})},1545:function(e,t,n){"use strict";n.d(t,{Rn:function(){return o},bW:function(){return s},sW:function(){return r},uB:function(){return c}});let i="regintel.auth.token",a="regintel.auth.role";function s(){return window.localStorage.getItem(i)}function r(){return window.localStorage.getItem(a)}function c(e,t){window.localStorage.setItem(i,e),window.localStorage.setItem(a,t)}function o(){window.localStorage.removeItem(i),window.localStorage.removeItem(a)}},3924:function(e,t,n){"use strict";n.d(t,{lE:function(){return s},qN:function(){return a},tx:function(){return i},y8:function(){return r}});let i="READINESS (MOCK) — NOT REGULATORY HISTORY",a={SYSTEM_MOCK:"SYSTEM_MOCK",ACTUAL_INSPECTION:"ACTUAL_INSPECTION",SELF_IDENTIFIED:"SELF_IDENTIFIED"},s={MOCK_SIMULATION:"MOCK_SIMULATION",REGULATORY_HISTORY:"REGULATORY_HISTORY"},r=[{id:"providers",label:"Providers",href:"/providers"},{id:"overview",label:"Overview",href:"/overview"},{id:"topics",label:"Topics",href:"/topics"},{id:"mock-session",label:"Mock Inspection",href:"/mock-session"},{id:"findings",label:"Findings",href:"/findings"},{id:"facilities",label:"Facilities",href:"/facilities"},{id:"evidence",label:"Evidence",href:"/evidence"},{id:"exports",label:"Exports",href:"/exports"},{id:"audit",label:"Audit Trail",href:"/audit"}]},9473:function(e,t,n){"use strict";function i(e,t){var n,i;let a=null!==(n=null==t?void 0:t.prefix)&&void 0!==n?n:8,s=null!==(i=null==t?void 0:t.suffix)&&void 0!==i?i:4;return e.length<=a+s+3?e:"".concat(e.slice(0,a),"...").concat(e.slice(-s))}function a(e,t){let n="string"==typeof e?new Date(e):e;return(null==t?void 0:t.dateOnly)?n.toISOString().split("T")[0]:n.toISOString()}n.d(t,{cJ:function(){return i},i$:function(){return a}})},1478:function(e,t,n){"use strict";n.d(t,{Eb:function(){return c},L2:function(){return a},Lg:function(){return r},Uu:function(){return s}});var i=n(3924);class a extends Error{constructor(e,t){super(e),this.missingRequirements=t,this.name="ConstitutionalViolationError"}}function s(e,t){let n=[],i=!!(e.topicCatalogVersion&&e.prsLogicVersion),s=!!(e.topicCatalogHash&&e.topicCatalogHash.length>0&&e.prsLogicHash&&e.prsLogicHash.length>0),r=!!e.snapshotTimestamp,c=!!e.domain;if(i||n.push("version"),s||n.push("hash"),r||n.push("timestamp"),c||n.push("domain"),(null==t?void 0:t.strict)&&n.length>0)throw new a("Constitutional UI violation: missing ".concat(n.join(", ")),n);return{valid:0===n.length,hasVersion:i,hasHash:s,hasTimestamp:r,hasDomain:c,missingRequirements:n}}function r(e){if(e.origin===i.qN.SYSTEM_MOCK&&e.reportingDomain===i.lE.REGULATORY_HISTORY)throw Error("Mock contamination detected: Finding ".concat(e.id," has origin=SYSTEM_MOCK ")+"in reportingDomain=REGULATORY_HISTORY. This violates regulatory/mock separation.")}function c(e){return e.origin===i.qN.SYSTEM_MOCK||e.reportingDomain===i.lE.MOCK_SIMULATION?{borderColor:"var(--color-simulation)",borderWidth:"4px"}:null}},2207:function(e){e.exports={badge:"DomainBadge_badge__7Kdti"}},5572:function(e){e.exports={container:"HashDisplay_container__9Q1H_",label:"HashDisplay_label__kYz8D",hash:"HashDisplay_hash__c7VcW",copyButton:"HashDisplay_copyButton__qQD1U"}},5366:function(e){e.exports={container:"MetadataBar_container__S0UH2",containerCompact:"MetadataBar_containerCompact__zy5UC",row:"MetadataBar_row__4ml17",separator:"MetadataBar_separator__WT2_E",version:"MetadataBar_version__idGjf",frozenLabel:"MetadataBar_frozenLabel__jUfJU"}},3102:function(e){e.exports={container:"TimestampDisplay_container__UDPj_",label:"TimestampDisplay_label__uHGbD",timestamp:"TimestampDisplay_timestamp__08SSF"}},8487:function(e){e.exports={container:"VersionBadge_container__Ih8Fn",label:"VersionBadge_label__I6AXK",version:"VersionBadge_version__bvYU3",checkmark:"VersionBadge_checkmark__HAzDD"}},1689:function(e){e.exports={header:"PageHeader_header__8CvHt",titleRow:"PageHeader_titleRow__LDZsN",title:"PageHeader_title__m8eFY",subtitle:"PageHeader_subtitle__NXKfi",actions:"PageHeader_actions__6l2hP"}},2298:function(e){e.exports={sidebar:"Sidebar_sidebar__5oZEx",header:"Sidebar_header__KGsqH",providerName:"Sidebar_providerName__lHDK0",snapshot:"Sidebar_snapshot__czHvf",status:"Sidebar_status__fdZro",statusLabel:"Sidebar_statusLabel__r_b7o",statusValue:"Sidebar_statusValue__BxZkR",statusSource:"Sidebar_statusSource__HIa9J",nav:"Sidebar_nav__yigU7",navItem:"Sidebar_navItem__NB3MD",navItemActive:"Sidebar_navItemActive__Q4zh_ Sidebar_navItem__NB3MD",systemStatus:"Sidebar_systemStatus__NQtFr",VersionBadge:"Sidebar_VersionBadge__oQ0mM",statusItem:"Sidebar_statusItem__YCgl1",checkmark:"Sidebar_checkmark__yPoO4"}}}]);